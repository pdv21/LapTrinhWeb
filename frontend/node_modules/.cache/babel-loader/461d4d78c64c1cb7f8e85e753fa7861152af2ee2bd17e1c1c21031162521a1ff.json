{"ast":null,"code":"var _jsxFileName = \"/Users/pdv/my-steam/frontend/src/Library.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./Style/Library.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Library = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    userId: paramUserId\n  } = useParams();\n\n  // Lấy userId từ session hoặc param URL\n  const storedUser = sessionStorage.getItem(\"user\");\n  const parsedUser = storedUser ? JSON.parse(storedUser) : null;\n  const currentUserId = parsedUser === null || parsedUser === void 0 ? void 0 : parsedUser.id;\n  const userId = paramUserId || currentUserId;\n\n  // State cho phân trang và games\n  const [page, setPage] = useState(1); // Trang hiện tại\n  const [pageSize, setPageSize] = useState(10); // Số game trên 1 trang\n  const [games, setGames] = useState([]); // Danh sách toàn bộ game\n  const [loading, setLoading] = useState(true);\n  const [query, setQuery] = useState(\"\");\n\n  // Genres cho sidebar filter\n  const [genres, setGenres] = useState([]);\n  const [selectedGenre, setSelectedGenre] = useState(0); // 0 là all genres\n\n  // Fetch genres\n  useEffect(() => {\n    const fetchGenres = async () => {\n      try {\n        const res = await axios.get(\"/api/genres\");\n        setGenres([{\n          GenreID: 0,\n          Name: \"All Genres\"\n        }, ...res.data]);\n      } catch {\n        setGenres([{\n          GenreID: 0,\n          Name: \"All Genres\"\n        }]);\n      }\n    };\n    fetchGenres();\n  }, []);\n\n  // Fetch toàn bộ library data cho user 1 lần\n  useEffect(() => {\n    const fetchLibrary = async () => {\n      setLoading(true);\n      try {\n        if (!userId) throw new Error(\"User ID is missing\");\n        let res;\n        try {\n          // Lấy nhiều nhất có thể (nếu user có quá nhiều game thì hãy xử lý backend tối ưu hơn)\n          res = await axios.get(`/api/users/${userId}/library?page=1&pageSize=999`);\n        } catch (err) {\n          var _err$response;\n          if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 404) {\n            try {\n              res = await axios.get(`/api/users/${userId}/games?page=1&pageSize=999`);\n            } catch {\n              res = await axios.get(`/api/library/${userId}?page=1&pageSize=999`);\n            }\n          } else {\n            throw err;\n          }\n        }\n        const data = res.data;\n        let rawItems = [];\n        if (Array.isArray(data)) rawItems = data;else rawItems = data.items || data.data || data.library || data.games || [];\n        setGames(rawItems);\n        setPage(1); // Reset page về 1 mỗi lần đổi user\n      } catch (error) {\n        setGames([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLibrary();\n    // eslint-disable-next-line\n  }, [userId]);\n\n  // Lọc theo genre và query, sau đó phân trang ở frontend\n  const filteredGames = games.filter(game => {\n    var _genres$find, _game$title;\n    // Điều chỉnh tuỳ DB: genreId, genre, GenreID\n    const matchGenre = selectedGenre === 0 || game.genreId === selectedGenre || game.GenreID === selectedGenre || game.genre === ((_genres$find = genres.find(g => g.GenreID === selectedGenre)) === null || _genres$find === void 0 ? void 0 : _genres$find.Name);\n    const matchTitle = (_game$title = game.title) === null || _game$title === void 0 ? void 0 : _game$title.toLowerCase().includes(query.toLowerCase());\n    return matchGenre && matchTitle;\n  });\n  const totalPages = Math.ceil(filteredGames.length / pageSize) || 1;\n  const pagedGames = filteredGames.slice((page - 1) * pageSize, page * pageSize);\n\n  // Nếu page vượt quá totalPages do filter, tự động về trang cuối cùng còn dữ liệu\n  useEffect(() => {\n    if (page > totalPages) setPage(totalPages);\n    // eslint-disable-next-line\n  }, [filteredGames.length, pageSize]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: [\"Loading games for user \", userId, \"...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"store-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"steam-logo\",\n          onClick: () => navigate('/store'),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/logo.png\",\n            alt: \"Steam Logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-flat\",\n            onClick: () => navigate('/library'),\n            children: \"Library\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-flat\",\n            onClick: () => navigate('/cart'),\n            children: \"Cart \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-flat\",\n            onClick: () => navigate('/profile'),\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: \"#fff\",\n        fontSize: \"2.1rem\",\n        fontWeight: 700,\n        margin: \"30px 0 22px 0\",\n        textAlign: \"center\"\n      },\n      children: \"Your Library\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"library-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Genres\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: genres.map(genre => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: selectedGenre === genre.GenreID ? \"selected\" : \"\",\n            onClick: () => {\n              setSelectedGenre(genre.GenreID);\n              setPage(1);\n            },\n            children: genre.Name\n          }, genre.GenreID, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search games...\",\n            value: query,\n            onChange: e => {\n              setQuery(e.target.value);\n              setPage(1); // Reset page về 1 mỗi lần search\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), pagedGames.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-games\",\n          children: \"Kh\\xF4ng t\\xECm th\\u1EA5y game n\\xE0o.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"library-games\",\n            children: pagedGames.map(game => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"library-game-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: game.imageUrl,\n                alt: game.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: game.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-button\",\n                onClick: () => {/* play logic */},\n                children: \"Play\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }, this)]\n            }, game.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pagination\",\n            style: {\n              textAlign: \"center\",\n              margin: \"20px 0\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPage(page - 1),\n              disabled: page === 1,\n              className: \"btn-page\",\n              children: \"Previous\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                margin: \"0 12px\"\n              },\n              children: [\"Page \", page, \" / \", totalPages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPage(page + 1),\n              disabled: page >= totalPages,\n              className: \"btn-page\",\n              children: \"Next\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Library, \"qgM0PJL89VEahROFGevdUUODgFo=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Library","_s","navigate","userId","paramUserId","storedUser","sessionStorage","getItem","parsedUser","JSON","parse","currentUserId","id","page","setPage","pageSize","setPageSize","games","setGames","loading","setLoading","query","setQuery","genres","setGenres","selectedGenre","setSelectedGenre","fetchGenres","res","get","GenreID","Name","data","fetchLibrary","Error","err","_err$response","response","status","rawItems","Array","isArray","items","library","error","filteredGames","filter","game","_genres$find","_game$title","matchGenre","genreId","genre","find","g","matchTitle","title","toLowerCase","includes","totalPages","Math","ceil","length","pagedGames","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","alt","style","color","fontSize","fontWeight","margin","textAlign","map","type","placeholder","value","onChange","e","target","imageUrl","disabled","_c","$RefreshReg$"],"sources":["/Users/pdv/my-steam/frontend/src/Library.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./Style/Library.css\";\n\nconst Library = () => {\n  const navigate = useNavigate();\n  const { userId: paramUserId } = useParams();\n\n  // Lấy userId từ session hoặc param URL\n  const storedUser = sessionStorage.getItem(\"user\");\n  const parsedUser = storedUser ? JSON.parse(storedUser) : null;\n  const currentUserId = parsedUser?.id;\n  const userId = paramUserId || currentUserId;\n\n  // State cho phân trang và games\n  const [page, setPage] = useState(1); // Trang hiện tại\n  const [pageSize, setPageSize] = useState(10); // Số game trên 1 trang\n  const [games, setGames] = useState([]); // Danh sách toàn bộ game\n  const [loading, setLoading] = useState(true);\n  const [query, setQuery] = useState(\"\");\n\n  // Genres cho sidebar filter\n  const [genres, setGenres] = useState([]);\n  const [selectedGenre, setSelectedGenre] = useState(0); // 0 là all genres\n\n  // Fetch genres\n  useEffect(() => {\n    const fetchGenres = async () => {\n      try {\n        const res = await axios.get(\"/api/genres\");\n        setGenres([{ GenreID: 0, Name: \"All Genres\" }, ...res.data]);\n      } catch {\n        setGenres([{ GenreID: 0, Name: \"All Genres\" }]);\n      }\n    };\n    fetchGenres();\n  }, []);\n\n  // Fetch toàn bộ library data cho user 1 lần\n  useEffect(() => {\n    const fetchLibrary = async () => {\n      setLoading(true);\n      try {\n        if (!userId) throw new Error(\"User ID is missing\");\n        let res;\n        try {\n          // Lấy nhiều nhất có thể (nếu user có quá nhiều game thì hãy xử lý backend tối ưu hơn)\n          res = await axios.get(`/api/users/${userId}/library?page=1&pageSize=999`);\n        } catch (err) {\n          if (err.response?.status === 404) {\n            try {\n              res = await axios.get(`/api/users/${userId}/games?page=1&pageSize=999`);\n            } catch {\n              res = await axios.get(`/api/library/${userId}?page=1&pageSize=999`);\n            }\n          } else {\n            throw err;\n          }\n        }\n\n        const data = res.data;\n        let rawItems = [];\n        if (Array.isArray(data)) rawItems = data;\n        else rawItems = data.items || data.data || data.library || data.games || [];\n        setGames(rawItems);\n        setPage(1); // Reset page về 1 mỗi lần đổi user\n      } catch (error) {\n        setGames([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLibrary();\n    // eslint-disable-next-line\n  }, [userId]);\n\n  // Lọc theo genre và query, sau đó phân trang ở frontend\n  const filteredGames = games.filter(game => {\n    // Điều chỉnh tuỳ DB: genreId, genre, GenreID\n    const matchGenre =\n      selectedGenre === 0 ||\n      game.genreId === selectedGenre ||\n      game.GenreID === selectedGenre ||\n      game.genre === genres.find(g => g.GenreID === selectedGenre)?.Name;\n\n    const matchTitle = game.title?.toLowerCase().includes(query.toLowerCase());\n    return matchGenre && matchTitle;\n  });\n\n  const totalPages = Math.ceil(filteredGames.length / pageSize) || 1;\n  const pagedGames = filteredGames.slice((page - 1) * pageSize, page * pageSize);\n\n  // Nếu page vượt quá totalPages do filter, tự động về trang cuối cùng còn dữ liệu\n  useEffect(() => {\n    if (page > totalPages) setPage(totalPages);\n    // eslint-disable-next-line\n  }, [filteredGames.length, pageSize]);\n\n  if (loading) {\n    return <div className=\"loading\">Loading games for user {userId}...</div>;\n  }\n\n  return (\n    <>\n      {/* HEADER */}\n      <header className=\"store-header\">\n        <div className=\"nav\">\n          <span className=\"steam-logo\" onClick={() => navigate('/store')}>\n            <img src=\"/logo.png\" alt=\"Steam Logo\" />\n          </span>\n          <div className=\"user-actions\">\n            <button className=\"btn-flat\" onClick={() => navigate('/library')}>Library</button>\n            <button className=\"btn-flat\" onClick={() => navigate('/cart')}>Cart </button>\n            <button className=\"btn-flat\" onClick={() => navigate('/profile')}>Profile</button>\n          </div>\n        </div>\n      </header>\n\n      <h2 style={{\n        color: \"#fff\",\n        fontSize: \"2.1rem\",\n        fontWeight: 700,\n        margin: \"30px 0 22px 0\",\n        textAlign: \"center\"\n      }}>Your Library</h2>\n\n      <div className=\"library-layout\">\n        <aside className=\"sidebar\">\n          <h4>Genres</h4>\n          <ul>\n            {genres.map(genre => (\n              <li\n                key={genre.GenreID}\n                className={selectedGenre === genre.GenreID ? \"selected\" : \"\"}\n                onClick={() => {\n                  setSelectedGenre(genre.GenreID);\n                  setPage(1);\n                }}\n              >\n                {genre.Name}\n              </li>\n            ))}\n          </ul>\n        </aside>\n        <div className=\"library-main\">\n          <div className=\"search-bar\">\n            <input\n              type=\"text\"\n              placeholder=\"Search games...\"\n              value={query}\n              onChange={e => {\n                setQuery(e.target.value);\n                setPage(1); // Reset page về 1 mỗi lần search\n              }}\n            />\n          </div>\n          {pagedGames.length === 0 ? (\n            <div className=\"no-games\">Không tìm thấy game nào.</div>\n          ) : (\n            <>\n              <div className=\"library-games\">\n                {pagedGames.map(game => (\n                  <div key={game.id} className=\"library-game-card\">\n                    <img src={game.imageUrl} alt={game.title} />\n                    <h3>{game.title}</h3>\n                    <button\n                      className=\"play-button\"\n                      onClick={() => { /* play logic */ }}\n                    >\n                      Play\n                    </button>\n                  </div>\n                ))}\n              </div>\n              <div className=\"pagination\" style={{ textAlign: \"center\", margin: \"20px 0\" }}>\n                <button\n                  onClick={() => setPage(page - 1)}\n                  disabled={page === 1}\n                  className=\"btn-page\"\n                >\n                  Previous\n                </button>\n                <span style={{ margin: \"0 12px\" }}>\n                  Page {page} / {totalPages}\n                </span>\n                <button\n                  onClick={() => setPage(page + 1)}\n                  disabled={page >= totalPages}\n                  className=\"btn-page\"\n                >\n                  Next\n                </button>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Library;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}