{"ast":null,"code":"var _jsxFileName = \"/Users/pdv/my-steam/frontend/src/GameDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GameDetail({\n  user,\n  cartItems,\n  setCartItems\n}) {\n  _s();\n  const {\n    gameId\n  } = useParams();\n  const navigate = useNavigate();\n  const [game, setGame] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [newRating, setNewRating] = useState(0);\n  const [newComment, setNewComment] = useState('');\n  const [inCart, setInCart] = useState(false);\n\n  // Fetch game details\n  useEffect(() => {\n    async function fetchGame() {\n      try {\n        const {\n          data\n        } = await axios.get(`/api/games/${gameId}`);\n        setGame(data);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    fetchGame();\n  }, [gameId]);\n\n  // Fetch reviews\n  useEffect(() => {\n    async function fetchReviews() {\n      try {\n        const {\n          data\n        } = await axios.get(`/api/games/${gameId}/reviews`);\n        setReviews(data);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    fetchReviews();\n  }, [gameId]);\n  const handleAddToCart = async () => {\n    try {\n      const userId = user.id;\n      const res = await axios.post('/api/cart/add', {\n        userId,\n        gameId: parseInt(gameId, 10)\n      });\n      if (res.status === 201) {\n        setInCart(true);\n        setCartItems(prev => [...prev, {\n          gameId: parseInt(gameId, 10)\n        }]);\n        navigate('/cart');\n      } else {\n        alert(res.data.message || 'Could not add to cart.');\n      }\n    } catch (err) {\n      var _err$response;\n      console.error('Add to Cart API Error:', err);\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data.message) || 'Error adding to cart.');\n    }\n  };\n  const handleReviewSubmit = async () => {\n    try {\n      await axios.post(`/api/games/${gameId}/reviews`, {\n        userId: user.id,\n        rating: newRating,\n        comment: newComment\n      });\n      // refresh\n      const {\n        data\n      } = await axios.get(`/api/games/${gameId}/reviews`);\n      setReviews(data);\n      setNewRating(0);\n      setNewComment('');\n    } catch (err) {\n      console.error(err);\n      alert('Error submitting review.');\n    }\n  };\n  if (!game) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: game.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: game.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddToCart,\n      disabled: inCart,\n      children: inCart ? 'In Cart' : 'Add to Cart'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Reviews\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), reviews.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [\"User: \", r.userId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: r.comment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Rating: \", r.rating, \" \\u2605\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, r.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Write a Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Rating:\", ' ', /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newRating,\n        onChange: e => setNewRating(parseInt(e.target.value, 10)),\n        children: Array.from({\n          length: 5\n        }, (_, i) => i + 1).map(n => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: n,\n          children: n\n        }, n, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Comment:\", ' ', /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: newComment,\n        onChange: e => setNewComment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleReviewSubmit,\n      children: \"Submit Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(GameDetail, \"qpiYbcYSNmjHIUt8pYa9J0ZUyYk=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = GameDetail;\nvar _c;\n$RefreshReg$(_c, \"GameDetail\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsxDEV","_jsxDEV","GameDetail","user","cartItems","setCartItems","_s","gameId","navigate","game","setGame","reviews","setReviews","newRating","setNewRating","newComment","setNewComment","inCart","setInCart","fetchGame","data","get","err","console","error","fetchReviews","handleAddToCart","userId","id","res","post","parseInt","status","prev","alert","message","_err$response","response","handleReviewSubmit","rating","comment","children","fileName","_jsxFileName","lineNumber","columnNumber","title","description","onClick","disabled","map","r","value","onChange","e","target","Array","from","length","_","i","n","_c","$RefreshReg$"],"sources":["/Users/pdv/my-steam/frontend/src/GameDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nexport default function GameDetail({ user, cartItems, setCartItems }) {\n  const { gameId } = useParams();\n  const navigate = useNavigate();\n  const [game, setGame] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [newRating, setNewRating] = useState(0);\n  const [newComment, setNewComment] = useState('');\n  const [inCart, setInCart] = useState(false);\n\n  // Fetch game details\n  useEffect(() => {\n    async function fetchGame() {\n      try {\n        const { data } = await axios.get(`/api/games/${gameId}`);\n        setGame(data);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    fetchGame();\n  }, [gameId]);\n\n  // Fetch reviews\n  useEffect(() => {\n    async function fetchReviews() {\n      try {\n        const { data } = await axios.get(`/api/games/${gameId}/reviews`);\n        setReviews(data);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    fetchReviews();\n  }, [gameId]);\n\n  const handleAddToCart = async () => {\n    try {\n      const userId = user.id;\n      const res = await axios.post('/api/cart/add', { userId, gameId: parseInt(gameId, 10) });\n      if (res.status === 201) {\n        setInCart(true);\n        setCartItems(prev => [...prev, { gameId: parseInt(gameId, 10) }]);\n        navigate('/cart');\n      } else {\n        alert(res.data.message || 'Could not add to cart.');\n      }\n    } catch (err) {\n      console.error('Add to Cart API Error:', err);\n      alert(err.response?.data.message || 'Error adding to cart.');\n    }\n  };\n\n  const handleReviewSubmit = async () => {\n    try {\n      await axios.post(`/api/games/${gameId}/reviews`, {\n        userId: user.id,\n        rating: newRating,\n        comment: newComment,\n      });\n      // refresh\n      const { data } = await axios.get(`/api/games/${gameId}/reviews`);\n      setReviews(data);\n      setNewRating(0);\n      setNewComment('');\n    } catch (err) {\n      console.error(err);\n      alert('Error submitting review.');\n    }\n  };\n\n  if (!game) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h1>{game.title}</h1>\n      <p>{game.description}</p>\n      <button onClick={handleAddToCart} disabled={inCart}>\n        {inCart ? 'In Cart' : 'Add to Cart'}\n      </button>\n\n      <h2>Reviews</h2>\n      {reviews.map(r => (\n        <div key={r.id}>\n          <strong>User: {r.userId}</strong>\n          <p>{r.comment}</p>\n          <p>Rating: {r.rating} â˜…</p>\n        </div>\n      ))}\n\n      <h3>Write a Review</h3>\n      <label>\n        Rating:{' '}\n        <select value={newRating} onChange={e => setNewRating(parseInt(e.target.value, 10))}>\n          {Array.from({ length: 5 }, (_, i) => i + 1).map(n => (\n            <option key={n} value={n}>{n}</option>\n          ))}\n        </select>\n      </label>\n      <label>\n        Comment:{' '}\n        <textarea value={newComment} onChange={e => setNewComment(e.target.value)} />\n      </label>\n      <button onClick={handleReviewSubmit}>Submit Review</button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}